<section fxLayout="row">
  <div
    fxLayout="column"
    autocomplete="off"
  >
    <h2 class="fw-bold">{{title}}</h2>
    <form
      autocomplete="off"
      [formGroup]="evaluationFormGroup"
    >
      <!-- FORM CONFIG NEW PERIOD -->
      <app-config-new-period formControlName="configPeriodControl"></app-config-new-period>
      <!-- END FORM CONFIG NEW PERIOD -->

      <!-- FORM CONFIG CORP GOALS -->
      <app-config-corp-goals
        *ngIf="showConfigCorpGoals"
        formControlName="configCorpGoals"
      ></app-config-corp-goals>
      <!-- END FORM CONFIG CORP GOALS -->

      <!-- FORM CONFIG AREA GOALS-->
      <app-config-area-goals
        *ngIf="showConfigAreaGoals"
        formControlName="configAreaGoals"
        [isRequired]="isRequiredAreaGoals"
      ></app-config-area-goals>
      <!-- END FORM CONFIG AREA GOALS -->

       <!-- FORM CONFIG COMPETENCES--->
       <app-config-competencies
        *ngIf="showConfigCompetences"
        formControlName="configCompetences"
      ></app-config-competencies>
       <!-- END FORM CONFIG COMPETENCES-->
    </form>
  </div>
  <!-- CARD RESUME -->
  <div fxLayout="column" style="max-width: 700px; width: 500px;">
    <mat-card>
      <mat-card-title class="fs-5 fw-bold">{{controlsPeriodForm?.name || '[Nombre del periodo]'}}</mat-card-title>
      <mat-card-title class="fs-6 fw-bolder">Peso: {{controlsPeriodForm?.weight || '[Peso]'}}</mat-card-title>
      <mat-card-subtitle>
        Desde el {{(controlsPeriodForm?.startDate | date:'shortDate') || '[Fecha inicia]'}}
        hasta el {{(controlsPeriodForm?.endDate | date:'shortDate') || '[Fecha termina]'}}
      </mat-card-subtitle>
      <mat-card-content *ngIf="showConfigCorpGoals || showConfigAreaGoals || showConfigCompetences">
          <span class="fs-6 fw-bolder">Componentes seleccionados</span>

          <app-resume-component *ngIf="showConfigCorpGoals"
            [title]="'Objetivos corporativos'"
            [dateStart]="controlsCorpGoalsForm?.startDate"
            [dateEnd]="controlsCorpGoalsForm?.endDate"
            [imageSRC]="'assets/images/objCorp.png'"
          ></app-resume-component>

          <app-resume-component *ngIf="showConfigAreaGoals"
            [title]="'Objetivos de Área (KPIs)'"
            [dateStart]="controlsAreaGoalsForm?.startDate"
            [dateEnd]="controlsAreaGoalsForm?.endDate"
            [imageSRC]="'/assets/images/group 1.png'"
          ></app-resume-component>

          <section *ngIf="showConfigCompetences">
            <section class="resume-container" fxLayout="column">
              <section
                class="mb-3"
                fxLayout="row"
                fxLayoutGap="15px"
                fxLayoutAlign="center center"
              >
                <div fxFlex="10"><img class="rounded-circle" src="/assets/images/comp.png" alt="image - competences" width="40" height="40"></div>
                <div fxFlex="90"><span class="fs-8 fw-bolder">Competencias</span></div>
              </section>
              <section *ngFor="let item of controlsCompetencesForm?.competences">
                <div
                  class="mb-2"
                  fxLayout="row"
                  fxLayoutAlign="start center"
                >
                  <div fxFlex="10"></div>
                  <div fxLayout="column" fxFlex="90">
                    <span class="fs-8 fw-bolder">{{ item.title }}</span>
                    <span class="fs-10 text-muted">
                      Del {{ (item.startDate | date:'shortDate') || '[Fecha inicia]' }}
                      al  {{ (item.endDate | date:'shortDate') || '[Fecha termina]' }}
                    </span>
                  </div>
                </div>
              </section>
            </section>
          </section>

      </mat-card-content>

      <mat-card-actions fxLayout="row" fxLayoutAlign="center center">
          <button
            color="primary"
            mat-raised-button
            (click)="onClick()"
          >
            Crear Evaluación
          </button>
      </mat-card-actions>
    </mat-card>
  </div>
  <!-- END CARD RESUME -->
</section>
