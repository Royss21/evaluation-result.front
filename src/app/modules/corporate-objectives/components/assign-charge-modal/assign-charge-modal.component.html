<button mat-icon-button class="close-button" mat-dialog-close>
  <mat-icon [inline]="true" class="close-icon">highlight_off</mat-icon>
</button>
<h2  mat-dialog-title>{{ modalTitle }}</h2>

<section
  fxLayout.xs="column"
  fxLayout.sm="row wrap"
  fxLayout.md="row wrap"
  fxLayout.lg="row wrap"
  fxLayout.xl="row wrap"
  fxLayoutAlign="space-between center"
>
  <div
    fxFlex.xl="50%"
    fxFlex.lg="50%"
    fxFlex.md="50%"
    fxFlex.sm="50%"
    fxFlex.xs="100%"
  >
    <mat-form-field fxFill appearance="outline">
      <mat-label>Cargo</mat-label>
      <mat-select [formControl]="chargeForm">
        <mat-option *ngFor="let charge of chargeList" [value]="charge.id">
          {{charge.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div
    fxFlex.xl="20%"
    fxFlex.lg="20%"
    fxFlex.md="20%"
    fxFlex.sm="20%"
    fxFlex.xs="100%"
  >
    <button
      mat-raised-button
      color="primary"
      type="button"
      (click)="addItemSubcomponent()"
    >
      Agregar cargo
    </button>
  </div>
</section>

<form
  class="p-3"
  autocomplete="off"
  [formGroup]="assignChargeFormGroup"
>
  <section class="content-padding-table">
    <table class="table-custom" formArrayName="itemSubcomponents">
      <thead>
        <tr class="mat-header-row">
          <th class="mat-header-cell fw-bold">Cargo</th>
          <th class="mat-header-cell fw-bold">Peso Relativo</th>
          <th class="mat-header-cell fw-bold">% Mínimo</th>
          <th class="mat-header-cell fw-bold">% Máximo</th>
          <th class="mat-header-cell fw-bold">Acciones</th>
        </tr>
      </thead>
      <tbody *ngFor="let item of itemsForm.controls; let pointIndex=index">
        <tr class="mat-row" [formGroupName]="pointIndex">
          <td class="mat-cell">
            <div class="mobile-container">
              <span class="mobile-label">Cargo</span>
              <ng-container
                class="mobile-content"
              >{{item.get('chargeName')?.value}}</ng-container>
            </div>
          </td>
          <td class="mat-cell">
            <div class="mobile-container mobile-container-assign">
              <span class="mobile-label">Peso Relativo</span>
              <ng-container class="mobile-content">
                <mat-form-field class="form-fiel-custom" appearance="outline">
                  <input
                    #input1
                    matInput
                    type="text"
                    NumbersOnly
                    maxlength="3"
                    autocomplete="off"
                    class="fs-6 text-end"
                    formControlName="relativeWeight"
                  >
                  <span matSuffix class="fs-6 pl-3 pb-3">%</span>
                </mat-form-field>
              </ng-container>
            </div>
          </td>
           <td class="mat-cell">
            <div class="mobile-container mobile-container-assign">
              <span class="mobile-label">% Mínimo</span>
              <ng-container class="mobile-content">
                <mat-form-field class="form-fiel-custom" appearance="outline">
                  <input
                    #input1
                    matInput
                    type="text"
                    NumbersOnly
                    maxlength="3"
                    autocomplete="off"
                    class="fs-6 text-end"
                    formControlName="minimunPercentage"
                  >
                  <span matSuffix class="fs-6 pl-3 pb-3">%</span>
                </mat-form-field>
              </ng-container>
            </div>
          </td>
          <td class="mat-cell">
            <div class="mobile-container mobile-container-assign">
              <span class="mobile-label">% Máximo</span>
              <ng-container class="mobile-content">
                <mat-form-field class="form-fiel-custom" appearance="outline">
                  <input
                    #input1
                    matInput
                    type="text"
                    NumbersOnly
                    maxlength="3"
                    autocomplete="off"
                    class="fs-6 text-end"
                    formControlName="maximunPercentage"
                  >
                  <span matSuffix class="fs-6 pl-3 pb-3">%</span>
                </mat-form-field>
              </ng-container>
            </div>
          </td>
          <td class="mat-cell">
            <div class="mobile-container">
              <span class="mobile-label">Acciones</span>
              <ng-container class="mobile-content">
                <button
                  mat-mini-fab
                  color="primary"
                  type="button"
                  class="btn-action-xs"
                  (click)="confirmSave(pointIndex, item)"
                >
                  <mat-icon>save</mat-icon>
                </button>
                <button
                  mat-mini-fab
                  color="warn"
                  type="button"
                  class="btn-action-xs"
                  (click)="deleteItemSubcomponent(pointIndex, item)"
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </ng-container>
            </div>
          </td>
        </tr>
        <tr *ngIf="itemsForm.controls.length <= 0">
          <div class="text-center">No se encontró registros</div>
        </tr>
      </tbody>
    </table>
  </section>
</form>
